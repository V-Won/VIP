<!doctype html>
<html class="is-smooth-scroll-compatible is-loading" lang="ko">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>해피차저 | 초고속 HappeCharger</title>
  <link rel="stylesheet" href="static/css/style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll/dist/locomotive-scroll.min.css">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
</head>

<body>

  <!-- box-header -->
  <div class="box-header">
  </div>
  <!-- //box-header -->

  <div class="wrap" data-scroll-container>

    <!-- box-kv -->
    <div class="box-kv">
      <div class="cover-bg">
        <div class="inner"
          style="background-image: url('static/images/main_kv.png');background-size: cover;background-position: center;">
        </div>
      </div>
    </div>
    <!-- //box-kv -->

    <div style="background: #fff;height: 100vh;"></div>

    <!-- box-footer -->
    <div class="box-footer">
    </div>
    <!-- //box-footer -->

  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll/dist/locomotive-scroll.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.6/lottie.min.js"></script>
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

  <script>
    /**
     * data-scroll-section 사용x
    */
    const scrollContainer = document.querySelector('[data-scroll-container]');

    const locoScroll = new LocomotiveScroll({
      el: scrollContainer,
      smooth: true,
      lerp: 0.05,
      multiplier: 1.2,
      tablet: {
        breakpoint: 0,
      },
      smartphone: {
        smooth: false,
        direction: 'vertical',
        gestureDirection: 'vertical'
      }
    });

    // ScrollTrigger와 Locomotive Scroll 연동
    locoScroll.on("scroll", ScrollTrigger.update);

    ScrollTrigger.scrollerProxy(scrollContainer, {
      scrollTop(value) {
        return arguments.length ? locoScroll.scrollTo(value, 0, 0) : locoScroll.scroll.instance.scroll.y;
      },
      getBoundingClientRect() {
        return { top: 0, left: 0, width: window.innerWidth, height: window.innerHeight };
      },
      pinType: scrollContainer.style.transform ? "transform" : "fixed"
    });

    ScrollTrigger.addEventListener("refresh", () => locoScroll.update());
    ScrollTrigger.refresh();

    gsap.registerPlugin(ScrollTrigger);

    // GSAP과 ScrollTrigger 플러그인을 로드합니다.
    gsap.registerPlugin(ScrollTrigger);

    gsap.to(".box-kv .inner", {
      yPercent: 50, // y축으로 50% 이동
      scrollTrigger: {
        trigger: ".box-kv",
        scroller: scrollContainer, // Locomotive Scroll과 연동
        start: "top top", // 스크롤 시작 지점
        end: "bottom top", // 스크롤 종료 지점
        scrub: true, // 스크롤에 따라 애니메이션 동기화
      }
    });

    gsap.to(".box-kv .inner", {
      opacity: 0.2, // 투명도 0.4로 변화
      scrollTrigger: {
        trigger: ".box-kv",
        scroller: scrollContainer, // Locomotive Scroll과 연동
        start: "top top",
        end: "bottom top",
        scrub: true,
      }
    });
  </script>

</body>

</html>